
config homeproxy 'infra'
	option __warning 'DO NOT EDIT THIS SECTION, OR YOU ARE ON YOUR OWN!'
	option common_port '22,53,80,143,443,465,853,873,993,995,5222,8080,8443,9418'
	option mixed_port '5330'
	option redirect_port '5331'
	option tproxy_port '5332'
	option dns_port '5333'
	option ntp_server 'time.apple.com'
	option sniff_override '1'
	option tun_name 'singtun0'
	option tun_addr4 '172.19.0.1/30'
	option tun_addr6 'fdfe:dcba:9876::1/126'
	option tun_mtu '9000'
	option table_mark '100'
	option self_mark '100'
	option tproxy_mark '101'
	option tun_mark '102'

config homeproxy 'migration'
	option crontab '1'

config homeproxy 'config'
	option routing_mode 'custom'
	option routing_port 'common'
	option proxy_mode 'redirect_tproxy'
	option ipv6_support '0'
	option log_level 'warn'

config homeproxy 'control'
	option lan_proxy_mode 'disabled'
	list wan_proxy_ipv4_ips '91.105.192.0/23'
	list wan_proxy_ipv4_ips '91.108.4.0/22'
	list wan_proxy_ipv4_ips '91.108.8.0/22'
	list wan_proxy_ipv4_ips '91.108.16.0/22'
	list wan_proxy_ipv4_ips '91.108.12.0/22'
	list wan_proxy_ipv4_ips '91.108.20.0/22'
	list wan_proxy_ipv4_ips '91.108.56.0/22'
	list wan_proxy_ipv4_ips '149.154.160.0/20'
	list wan_proxy_ipv4_ips '185.76.151.0/24'
	list wan_proxy_ipv4_ips '203.208.50.66/32'

config homeproxy 'routing'
	option sniff_override '1'
	option default_outbound 'nil'
	option default_outbound_dns 'DNS_Server_Direct'
	option bypass_cn_traffic '0'

config homeproxy 'dns'
	option dns_strategy 'prefer_ipv4'
	option default_server 'DNS_Server_Direct'
	option default_strategy 'prefer_ipv6'

config homeproxy 'subscription'
	option auto_update '0'
	option allow_insecure '0'
	option packet_encoding 'xudp'
	option update_via_proxy '0'
	option filter_nodes 'blacklist'
	list filter_keywords '重置|到期|过期|剩余|套餐'
	list filter_keywords 'Expiration|Remaining'
	option user_agent 'root'

config homeproxy 'server'
	option enabled '0'
	option log_level 'warn'

config ruleset 'geosite_adblock'
	option label 'geosite-adblock'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geosite/adblock.srs'
	option outbound 'direct-out'

config ruleset 'geosite_adguard'
	option label 'geosite-adguard'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geosite/adguard.srs'
	option outbound 'direct-out'

config ruleset 'geosite_openai'
	option label 'geosite-openai'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geosite/openai.srs'
	option outbound 'direct-out'

config ruleset 'geosite_steam'
	option label 'geosite-steam'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geosite/steam.srs'
	option outbound 'direct-out'

config ruleset 'geosite_tiktok'
	option label 'geosite-tiktok'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geosite/tiktok.srs'
	option outbound 'direct-out'

config ruleset 'geosite_netflix'
	option label 'geosite-netflix'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geosite/netflix.srs'
	option outbound 'direct-out'

config ruleset 'geoip_netflix'
	option label 'geoip-netflix'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geoip/netflix.srs'
	option outbound 'direct-out'

config ruleset 'geosite_bing'
	option label 'geosite-bing'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geosite/bing.srs'
	option outbound 'direct-out'

config ruleset 'geosite_apple'
	option label 'geosite-apple'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geosite/apple.srs'
	option outbound 'direct-out'

config ruleset 'geosite_geolocation_nocn'
	option label 'geosite-geolocation-!cn'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geosite/geolocation-!cn.srs'
	option outbound 'direct-out'

config ruleset 'geosite_cn'
	option label 'geosite-cn'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geosite/cn.srs'
	option outbound 'direct-out'

config ruleset 'geoip_cn'
	option label 'geoip-cn'
	option enabled '1'
	option type 'remote'
	option format 'binary'
	option url 'https://www.ghproxy.cn/https://github.com/MetaCubeX/meta-rules-dat/blob/sing/geo/geoip/cn.srs'
	option outbound 'direct-out'

config node 'Node_Direct'
	option label 'Direct'
	option type 'direct'

config routing_node 'Routing_Node_MainlyExport'
	option label 'MainlyExport'
	option enabled '1'
	option node 'urltest'
	list urltest_nodes 'Node_Direct'

config routing_node 'Routing_Node_OpenAI'
	option label 'OpenAI'
	option enabled '1'
	option node 'urltest'
	list urltest_nodes 'Node_Direct'

config routing_node 'Routing_Node_Steam'
	option label 'Steam'
	option enabled '1'
	option node 'urltest'
	list urltest_nodes 'Node_Direct'

config routing_node 'Routing_Node_TikTok'
	option label 'TikTok'
	option enabled '1'
	option node 'urltest'
	list urltest_nodes 'Node_Direct'

config routing_node 'Routing_Node_Netflix'
	option label 'Netflix'
	option enabled '1'
	option node 'urltest'
	list urltest_nodes 'Node_Direct'

config routing_node 'Routing_Node_Bing'
	option label 'Bing'
	option enabled '1'
	option node 'urltest'
	list urltest_nodes 'Node_Direct'

config routing_node 'Routing_Node_Apple'
	option label 'Apple'
	option enabled '1'
	option node 'urltest'
	list urltest_nodes 'Node_Direct'

config routing_rule 'Routing_Rule_QUIC'
	option label 'QUIC'
	option enabled '0'
	option mode 'default'
	list protocol 'quic'
	option action 'reject'
	option reject_method 'default'
	option reject_no_drop '1'

config routing_rule 'Routing_Rule_Adguard'
	option label 'Adguard'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_adblock'
	list rule_set 'geosite_adguard'
	option action 'reject'
	option reject_method 'default'
	option reject_no_drop '1'

config routing_rule 'Routing_Rule_OpenAI'
	option label 'OpenAI'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_openai'
	option action 'route'
	option outbound 'Routing_Node_OpenAI'

config routing_rule 'Routing_Rule_Steam'
	option label 'Steam'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_steam'
	option action 'route'
	option outbound 'Routing_Node_Steam'

config routing_rule 'Routing_Rule_TikTok'
	option label 'TikTok'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_tiktok'
	option action 'route'
	option outbound 'Routing_Node_TikTok'

config routing_rule 'Routing_Rule_Netflix'
	option label 'Netflix'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_netflix'
	list rule_set 'geoip_netflix'
	option action 'route'
	option outbound 'Routing_Node_Netflix'

config routing_rule 'Routing_Rule_Bing'
	option label 'Bing'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_bing'
	option action 'route'
	option outbound 'Routing_Node_Bing'

config routing_rule 'Routing_Rule_Apple'
	option label 'Apple'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_apple'
	option action 'route'
	option outbound 'Routing_Node_Apple'

config routing_rule 'Routing_Rule_China'
	option label 'China'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_cn'
	list rule_set 'geoip_cn'
	option action 'route'
	option outbound 'direct-out'

config routing_rule 'Routing_Rule_NoChina'
	option label 'NoChina'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_geolocation_nocn'
	option action 'route'
	option outbound 'Routing_Node_MainlyExport'

config dns_server 'DNS_Server_Direct'
	option label 'DNS_Server_Direct'
	option enabled '1'
	option type 'udp'
	option server '223.5.5.5'
	option outbound 'direct-out'

config dns_server 'DNS_Server_OpenAI'
	option label 'DNS_Server_OpenAI'
	option enabled '1'
	option type 'tls'
	option server '8.8.8.8'
	option outbound 'Routing_Node_OpenAI'

config dns_server 'DNS_Server_Steam'
	option label 'DNS_Server_Steam'
	option enabled '1'
	option type 'tls'
	option server '8.8.8.8'
	option outbound 'Routing_Node_Steam'

config dns_server 'DNS_Server_TikTok'
	option label 'DNS_Server_TikTok'
	option enabled '1'
	option type 'tls'
	option server '8.8.8.8'
	option outbound 'Routing_Node_TikTok'

config dns_server 'DNS_Server_Netflix'
	option label 'DNS_Server_Netflix'
	option enabled '1'
	option type 'tls'
	option server '8.8.8.8'
	option outbound 'Routing_Node_Netflix'

config dns_server 'DNS_Server_Bing'
	option label 'DNS_Server_Bing'
	option enabled '1'
	option type 'tls'
	option server '8.8.8.8'
	option outbound 'Routing_Node_Bing'

config dns_server 'DNS_Server_Apple'
	option label 'DNS_Server_Apple'
	option enabled '1'
	option type 'tls'
	option server '8.8.8.8'
	option outbound 'Routing_Node_Apple'

config dns_server 'DNS_Server_MainlyExport'
	option label 'DNS_Server_MainlyExport'
	option enabled '1'
	option type 'tls'
	option server '8.8.8.8'
	option outbound 'Routing_Node_MainlyExport'

config dns_rule 'DNS_Rule_Adguard'
	option label 'DNS_Rule_Adguard'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_adblock'
	list rule_set 'geosite_adguard'
	option action 'reject'
	option reject_method 'default'
	option reject_no_drop '1'

config dns_rule 'DNS_Rule_OpenAI'
	option label 'DNS_Rule_OpenAI'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_openai'
	option action 'route'
	option server 'DNS_Server_OpenAI'
	option domain_strategy 'ipv4_only'

config dns_rule 'DNS_Rule_Steam'
	option label 'DNS_Rule_Steam'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_steam'
	option action 'route'
	option server 'DNS_Server_Steam'
	option domain_strategy 'ipv4_only'

config dns_rule 'DNS_Rule_TikTok'
	option label 'DNS_Rule_TikTok'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_tiktok'
	option action 'route'
	option server 'DNS_Server_TikTok'
	option domain_strategy 'ipv4_only'

config dns_rule 'DNS_Rule_Netflix'
	option label 'DNS_Rule_Netflix'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_netflix'
	option action 'route'
	option server 'DNS_Server_Netflix'
	option domain_strategy 'ipv4_only'

config dns_rule 'DNS_Rule_Bing'
	option label 'DNS_Rule_Bing'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_bing'
	option action 'route'
	option server 'DNS_Server_Bing'
	option domain_strategy 'ipv4_only'

config dns_rule 'DNS_Rule_Apple'
	option label 'DNS_Rule_Apple'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_apple'
	option action 'route'
	option server 'DNS_Server_Direct'
	option domain_strategy 'prefer_ipv6'

config dns_rule 'DNS_Rule_China'
	option label 'DNS_Rule_China'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_cn'
	option action 'route'
	option server 'DNS_Server_Direct'
	option domain_strategy 'prefer_ipv6'

config dns_rule 'DNS_Rule_NoChina'
	option label 'DNS_Rule_NoChina'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_geolocation_nocn'
	option action 'route'
	option server 'DNS_Server_MainlyExport'
	option domain_strategy 'ipv4_only'

